<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>forms/Household.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ConfirmLeave.html">ConfirmLeave</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ManagedNumberField.html">ManagedNumberField</a></span></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-%25257BObject%25257D.html">{Object}</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#AboutContent">AboutContent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#BottomButton">BottomButton</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#BottomButtons">BottomButtons</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#CashFlowRow">CashFlowRow</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#CLIENT_DEFAULTS">CLIENT_DEFAULTS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#ColumnHeader">ColumnHeader</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#ColumnHeading">ColumnHeading</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#CurrentBenefitsContent">CurrentBenefitsContent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#CurrentBenefitsStep">CurrentBenefitsStep</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#CurrentExpensesStep">CurrentExpensesStep</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#CurrentIncomeStep">CurrentIncomeStep</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#ExpensesFormContent">ExpensesFormContent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#ExternalLink">ExternalLink</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#FormHeading">FormHeading</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#FormPartsContainer">FormPartsContainer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#FormSubheading">FormSubheading</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getAdjustedIncome">getAdjustedIncome</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getDependentCostsMonthly">getDependentCostsMonthly</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getDisabledAndMedicalAllowancesSum">getDisabledAndMedicalAllowancesSum</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getEveryMember">getEveryMember</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getEveryMemberOfHousehold">getEveryMemberOfHousehold</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getExtraAmount">getExtraAmount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getGrossUnearnedIncomeMonthly">getGrossUnearnedIncomeMonthly</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getHousingBenefit">getHousingBenefit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getMaxIntKey">getMaxIntKey</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getMembers">getMembers</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getMonthlyLimitBySize">getMonthlyLimitBySize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getNetIncome">getNetIncome</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getProgramNameBenefits">getProgramNameBenefits</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getShelterDeduction">getShelterDeduction</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getSimpleGrossIncomeMonthly">getSimpleGrossIncomeMonthly</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getSNAPBenefits">getSNAPBenefits</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getTimeSetter">getTimeSetter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getTTPs">getTTPs</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getYearlyLimitBySize">getYearlyLimitBySize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#HouseholdContent">HouseholdContent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#HouseholdStep">HouseholdStep</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Housing">Housing</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#IncomeForm">IncomeForm</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#InlineLabelInfo">InlineLabelInfo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#IntervalColumnHeadings">IntervalColumnHeadings</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#isDependent">isDependent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#isPositiveWholeNumber">isPositiveWholeNumber</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#limit">limit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#MassiveButton">MassiveButton</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#MassiveToggle">MassiveToggle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#MemberButton">MemberButton</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#MemberField">MemberField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#PredictionsStep">PredictionsStep</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#returnSame">returnSame</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Role">Role</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#sampleClients">sampleClients</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#sum">sum</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#sumProps">sumProps</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#toMoneyStr">toMoneyStr</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#undefinedString">undefinedString</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#UNEARNED_INCOME_SOURCES">UNEARNED_INCOME_SOURCES</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#valueFixers">valueFixers</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">forms/Household.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// REACT COMPONENTS
import React from 'react';
import {
  Button,
  Form,
  Dropdown,
  Header,
  Checkbox,
  Icon
} from 'semantic-ui-react';

// PROJECT COMPONENTS
import {
  FormPartsContainer,
  ColumnHeading,
  ManagedNumberField
} from './formHelpers';

// COMPONENT HELPER FUNCTIONS
import { getTimeSetter } from '../utils/getTimeSetter';
import { isPositiveWholeNumber } from '../utils/validators';

// OBJECT MANIPULATION
import { cloneDeep } from 'lodash';


// ======================
// GENERICS
// ======================
// To be able to adjust sizes easily
// Very specific to household size. May be worth creating
// a constructor for columns in general, or maybe use a Grid.
const columnStyle = {
  display: 'inline-block',
  textAlign: 'center',
  marginTop: '0.7em',
  // marginBottom: '0.7em'
};

const Columns = {};

// `noMargin` is a bit hacky, but it'll do for now
Columns.One = function ({ noMargin, children }) {
  var marginTop = columnStyle.marginTop;
  if ( noMargin ) { marginTop = 0; }
  return ( &lt;div style={{...columnStyle, marginTop: marginTop, width: '5em'}}> {children} &lt;/div> );
}

Columns.Two = function ({ noMargin, children }) {
  var marginTop = columnStyle.marginTop;
  if ( noMargin ) { marginTop = 0; }
  return ( &lt;div style={{...columnStyle, marginTop: marginTop, width: '20em', textAlign: 'left', paddingLeft: '1em'}}> {children} &lt;/div> );
}

Columns.Three = function ({ noMargin, children }) {
  var marginTop = columnStyle.marginTop;
  if ( noMargin ) { marginTop = 0; }
  return ( &lt;div style={{...columnStyle, marginTop: marginTop, width: '5em'}}> {children} &lt;/div> );
}

Columns.Four = function ({ noMargin, children }) {
  var marginTop = columnStyle.marginTop;
  if ( noMargin ) { marginTop = 0; }
  return ( &lt;div style={{...columnStyle, marginTop: marginTop, width: '10em'}}> {children} &lt;/div> );
}


/** @todo description
* 
* @function
* @param {object} props
* @property {object} props.__ - explanation
* 
* @returns Component
*/
const ColumnHeader = function ({ children, columnNum }) {

  var Container = Columns[ columnNum ];

  return (
    &lt;Container>
      &lt;ColumnHeading type={'household'} colName={''}>
        { children }
      &lt;/ColumnHeading>
    &lt;/Container>
  );

};


/** @todo description
* 
* @function
* @param {object} props
* @property {object} props.__ - explanation
* 
* @returns Component
*/
const MemberButton = function ({ basic, color, iconName, className, onClick }) {

  color = color || null;

  return (
    &lt;Button
      basic={!!basic}
      color={color}
      icon={iconName}
      className={className}
      onClick={onClick}
      style={{ padding: '0', height: '2.2em', width: '2.2em' }}
      circular />
  );

};


// ======================
// UNIQUE
// ======================

/** @todo description
* 
* @function
* @param {object} props
* @property {object} props.__ - explanation
* 
* @returns Component
*/
const Role = function ({ member, setMember }) {

  var ThisRole  = null,
      margin   = '0';

  if ( member.index === 0 ) {

    ThisRole  = &lt;span>Head of Household&lt;/span>;

  } else if ( member.index === 1 ) {

    margin = '-1em';

    var options = [
      { text: 'Spouse of Head of Household', value: 'spouse' },
      { text: 'Household Member', value: 'member' }
    ];

    ThisRole = &lt;Dropdown selection
                  name={'m_role'}
                  value={member.m_role}
                  options={options}
                  onChange={setMember}/>

  } else {

    ThisRole  = &lt;span>Household Member&lt;/span>;

  }

  // Styles will have to be adjusted.
  return (
    &lt;div style={{ display: 'inline-block', width: '100%', textAlign: 'left', marginLeft: margin }}>
      { ThisRole }
    &lt;/div>
  );

};  // End Role(&lt;>)


/** @todo description
* 
* @function
* @param {object} props
* @property {object} props.__ - explanation
* 
* @returns Component
*/
const MemberField = function ({ household, time, setHousehold, setClientProperty }, indx ) {

  var member      = household[ indx ],
      routeStart  = 'household/' + indx + '/';
  member.index    = indx;  // Just needed as member prop in this file


  var onMemberChange = function ( evnt, inputProps ) {
    var route = routeStart + inputProps.name;
    var data  = { route: route, value: inputProps.value };
    setClientProperty( evnt, data );
  };


  var onMemberChecked = function ( evnt, inputProps ) {
    var route = routeStart + inputProps.name;
    var data  = { route: route, value: inputProps.checked };
    setClientProperty( evnt, data );
  };


  var removeMember = function ( evnt, inputProps ) {
    household.splice( indx, 1 );
    setHousehold( evnt, household );
  };  // End removeMember()


  // The font size thing is a bit weird, but... later
  return (
    &lt;Form.Field className='flex-item' key={indx}>

      &lt;Columns.One>
        { indx > 0
          ? &lt;MemberButton className={'remove'} onClick={removeMember} iconName={'remove'} />
          : &lt;span>{ household.length > 1
            ? &lt;Icon fitted name={'ban'} style={{ color: '#cfcfd0', fontSize: '2.2em', verticalAlign: 'text-top' }} />
            : null
          }&lt;/span>
        }
      &lt;/Columns.One>

      &lt;Columns.Two>
        &lt;Role member={member} setMember={onMemberChange} />
      &lt;/Columns.Two>

      &lt;Columns.Three>
        &lt;ManagedNumberField
          value     = {member.m_age}
          name      = {'m_age'}
          className = {time + ' member-age ' + time}
          validate  = {isPositiveWholeNumber}
          format    = {function ( value ) { return value; }}
          store     = {onMemberChange} />
      &lt;/Columns.Three>

      &lt;Columns.Four>
        &lt;Checkbox name={'m_disabled'} checked={member.m_disabled} onChange={onMemberChecked} />
      &lt;/Columns.Four>

    &lt;/Form.Field>
  );

};  // End MemberField()


/** @todo description
* 
* @function
* @param {object} props
* @property {object} props.__ - explanation
* 
* @returns Component
*/
const getMembers = function ( current, time, setHousehold, setClientProperty ) {

  var household = current.household,
      props     = {
        household:          household,
        time:               time,
        setHousehold:       setHousehold,
        setClientProperty:  setClientProperty
      }

  var mems = [];
  for (let memi = 0; memi &lt; household.length; memi++) {
    mems.push( MemberField( props, memi ) );
  };

  return mems;

};  // End getMembers()


/** @todo description
* 
* @todo Could this be a number field? If not, then a dropdown?
* 
* @function
* @param {object} props
* @property {object} props.__ - explanation
* 
* @returns Component
*/
const HouseholdContent = function ({ current, time, setClientProperty }) {

  // Don't mutate state properties
  var household = cloneDeep( current.household );


  var setHousehold = function ( evnt, newHousehold ) {

    var obj = {
      route: 'household',
      value: newHousehold
    };

    setClientProperty( evnt, obj );

  };  // End setHousehold()


  var addMember = function ( evnt, inputProps ) {

    var member = { m_age: 30, m_role: 'member', m_disabled: false };
    if ( household.length === 1 ) {
      member.m_role = 'spouse';
    }

    household.push( member );
    setHousehold( evnt, household );

  };  // End addMember()


  return (
    &lt;wrapper className='field-aligner two-column'>
      &lt;div style={{marginBottom: '.5em'}}>
        &lt;ColumnHeader columnNum='One'>&lt;/ColumnHeader>
        &lt;ColumnHeader columnNum='Two'>Role&lt;/ColumnHeader>
        &lt;ColumnHeader columnNum='Three'>Age&lt;/ColumnHeader>
        &lt;ColumnHeader columnNum='Four'>Disabled&lt;/ColumnHeader>
      &lt;/div>

      { getMembers( current, time, setHousehold, setClientProperty ) }

      &lt;Button id={'addMember'} basic onClick={addMember}>
        &lt;Columns.One noMargin={true}>
          &lt;Icon name={'plus'} circular inverted color={'teal'} />
        &lt;/Columns.One>

        &lt;Columns.Two noMargin={true}>
          &lt;Header as='h4' color={'teal'}> Add a member &lt;/Header>
        &lt;/Columns.Two>

        &lt;Columns.Three noMargin={true} />
        &lt;Columns.Four noMargin={true} />
      &lt;/Button>

    &lt;/wrapper>
  );

};  // End HouseholdContent()


/** @todo description
* 
* @function
* @param {object} props
* @property {object} props.__ - explanation
* 
* @returns Component
*/
// `props` is a cloned version of the original props. References broken.
const HouseholdStep = function ( props ) {

  const setTimeProp = getTimeSetter( 'current', props.changeClient );

  return (
    &lt;Form className='current-household-size-form flex-column flex-item'>
      &lt;FormPartsContainer
        title     = {'Household'}
        clarifier = {'Information about the members of your household.'}
        left      = {{name: 'Previous', func: props.previousStep}}
        right     = {{name: 'Next', func: props.nextStep}}>
			&lt;HouseholdContent setClientProperty={setTimeProp} current={props.client.current} time={'current'} />
      &lt;/FormPartsContainer>
    &lt;/Form>
  );

};  // End HouseholdStep()

export { HouseholdStep };
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Dec 11 2017 14:46:28 GMT-0500 (EST) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
